# =============================================================================
# LOCAL DEVELOPMENT OVERRIDES
# =============================================================================
# Exposes services on localhost ports and disables VPS-only services.
#
# Usage:
#   docker compose \
#     -f docker-compose.ops.yml \
#     -f ops/overlays/local/docker-compose.yml \
#     -f docker-compose.local.yml \
#     up -d
# =============================================================================

services:
  {{ service_name }}:
    ports:
      - "{{ app_port }}:{{ app_port }}"
{% if grafana %}

  grafana:
    ports:
      - "3001:3000"
{% endif %}
{% if prometheus %}

  prometheus:
    ports:
      - "9090:9090"
{% endif %}
{% if loki %}

  loki:
    ports:
      - "3100:3100"
{% endif %}
{% if vault %}

  vault:
    ports:
      - "8200:8200"
{% endif %}
{% if promtail %}

  # Disable promtail locally
  promtail:
    profiles:
      - disabled
{% endif %}
{% if watchtower %}

  # Disable watchtower locally
  watchtower:
    profiles:
      - disabled
{% endif %}
